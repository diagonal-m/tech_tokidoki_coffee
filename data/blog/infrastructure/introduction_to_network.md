---
title: 個人的ネットワーク・サーバー入門
date: '2025-2-20'
tags: ['infrastructure']
draft: false
summary: '個人的ネットワーク&サーバー入門記事'
---

## この記事について

クラウドインフラの分野に明確にコンプレックスがあるので、基礎から学習するための個人的な入門記事です。

## 目次

<TOCInline toc={props.toc} exclude="目次" toHeading={3} />

## Introduction

![introduction_to_network_1](/static/images/infrastructure/introduction_to_network_1.png)

Webサイトにアクセスするとき、私たちは普段「google.com」や「example.com」といったドメイン名を入力する。しかし、インターネットの世界では、実際の通信は「142.250.207.14」などの IPアドレス を使って行われています。では、なぜ私たちはIPアドレスではなく、ドメイン名でサイトにアクセスできるのでしょうか？

## IPアドレスとは
IPアドレスは インターネット上の住所 のようなもので、各サーバーには固有のIPアドレスが割り振られています。IPアドレスは通常、「xxx.xxx.xxx.xxx」 のように4つの数字のブロックで表されます（IPv4の場合）。

例えば、Googleのサーバーの一つには 「142.250.207.14」 というIPアドレスが割り振られています。このIPアドレスを直接ブラウザに入力すると、Googleのページにアクセスできます。

### なぜ「google.com」と入力するだけでアクセスできるのか？
通常、私たちは「142.250.207.14」のようなIPアドレスを覚えるのではなく、「google.com」といった ドメイン名 を使ってWebサイトにアクセスします。しかし、コンピュータは IPアドレスでしか通信できない ため、ドメイン名をIPアドレスに変換する必要があります。

この変換を行うのが DNS（Domain Name System） です。

## DNSとは?
DNS（ドメイン・ネーム・システム）は、ドメイン名とIPアドレスを対応付けるシステム です。ドメイン名をIPアドレスに変換することを 名前解決（ネームリゾリューション） と呼びます。

### 名前解決の流れ
1. ユーザーがブラウザのURL欄に「google.com」を入力
2. コンピュータは「google.com」のIPアドレスを知るため、DNSサーバーに問い合わせる
3. DNSサーバーが「google.com」のIPアドレス（例：142.250.207.14）を返す
4. ブラウザが返されたIPアドレスにアクセスし、Googleのサーバーと通信を開始

## ハードウェアの基本構成

![introduction_to_network_2](/static/images/infrastructure/introduction_to_network_2.png)

| 装置 | 説明 | 性能指標 |
| --- | ---- | ------- |
| CPU | サーバーの「頭脳」ともいえる部分で、すべての計算や命令処理を担当します。プログラムの実行、データの処理、タスクの制御など、あらゆる処理の中心となります。 | CPU使用率 |
| メモリ | 一時的なデータの保存場所であり、CPUが高速にデータをやり取りするために利用されます。メモリの容量が大きいほど、より多くのデータを同時に処理できます。 | メモリ使用率 |
| ストレージ | データを長期間保存するための装置 です。サーバーでは主に SSD（Solid State Drive） が使用され、高速なデータの読み書きが可能です | ディスク使用率、I/O性能 |
| NIC | サーバーとネットワークを接続するためのパーツです。インターネットやローカルネットワークに接続し、データの送受信を行います。 | ネットワーク帯域幅 |

## サーバーとは

「サーバー」という言葉はよく使われるが、その実態は「特定の役割を持つコンピュータ」と考えることができる
- Webサイトを公開するなら**Webサーバー**
- データの管理が必要なら**データベースサーバー**
- メールの送受信をするなら**メールサーバー**

ただし、物理的に「Webサーバー専用マシン」「データベース専用マシン」があるわけではなく、OS（LinuxやWindows Serverなど）をインストールしたコンピュータに、必要なソフトウェア（NginxやMySQLなど）を入れることで、それぞれの機能を持たせることができる。

![introduction_to_network_3](/static/images/infrastructure/introduction_to_network_3.png)

## ネットワークとは

ネットワークとは、複数のコンピュータが相互に通信できるようにする仕組みです。  
インターネットに接続するネットワークでは、「TCP/IP（Transmission Control Protocol / Internet Protocol）」という通信プロトコルが標準的に使用されます。   
TCP/IPでは、ネットワーク上のすべての機器に「IPアドレス」が割り当てられます。例えば、「10.0.1.10」のように ピリオドで区切られた4つの数字 で表されるのが、一般的な IPv4アドレス です。

### 「パブリックIPアドレス」と「プライベートIPアドレス」

IPアドレスには、大きく分けて 「パブリックIPアドレス」 と 「プライベートIPアドレス」 があります。

#### パブリックIPアドレス

- インターネットに接続するためのIPアドレス
- ICANN（Internet Corporation for Assigned Names and Numbers） によって管理され、各国・ISP（インターネットプロバイダ）に割り当てられる
- 世界中で一意 であり、重複することはない

例えば、自宅のWi-Fiやスマホのネットワークは、ISPから提供されたパブリックIPアドレスを介してインターネットに接続しています。

#### プライベートIPアドレス

- 社内LANや家庭内ネットワークで使用するIPアドレス
- インターネット上では使用されないため、自由に割り当て可能
- ルーターやネットワーク機器を介してインターネットと接続する

以下のIPアドレス範囲はプライベートIPアドレスとして予約されています。

| IPアドレス範囲                  |
| ----------------------------- |
| 10.0.0.0 ~ 10.255.255.255     |
| 172.16.0.0 ~ 172.31.255.255   |
| 192.168.0.0 ~ 192.168.255.255 |

### IPアドレス範囲と表記

IPアドレスは、ネットワーク内で一意である必要があります。ネットワークを構築する際、IPアドレスの割り当てを適切に設計することが重要です。 

### IPアドレス範囲の決め方

ネットワークで使用するIPアドレスの範囲は、以下のように 2のn乗単位 で区切る必要があります。

| 区切り方 | IPアドレス範囲の例 |
| ------- | --------------- |
| 256個   | 192.168.1.0 ～ 192.168.1.255 |
| 65536個 | 192.168.0.0 ～ 192.168.255.255 |

IPアドレスは、  
前半部分（ネットワーク部） → そのネットワークの共通アドレス  
後半部分（ホスト部） → 各デバイスに割り当てるアドレス  
に分かれます。

![introduction_to_network_4](/static/images/infrastructure/introduction_to_network_4.png)

 ネットワーク部は、同じネットワークに属する限りは、同じ値になります。そしてホスト部が、割り当てたいサーバーやクライアント、ネットワーク機器に対する連番となります。

## CIDR表記とサブネットマスク表記
「192.168.1.0 ~ 192.168.1.255」や「192.168.0.0 ~ 192.168.255.255」といった表現は長いため、通常、IPアドレス範囲を示すときには、「CIDR表記(サイダー：Classless Inter-Domain Routing)」もしくは「サブネットマスク表記」のいずれかの表記を用います。

### CIDR表記 
CIDR表記では、**IPアドレスのネットワーク部のビット数**を`/24`のように記述します。  
例えば、`192.168.1.0/24` は **ネットワーク部が24ビット** であることを意味し、`192.168.0.0/16` は **ネットワーク部が16ビット**であることを示します。

| CIDR表記 | ネットワーク部のビット数 | ホスト部のビット数 | IPアドレス範囲 | 割り当て可能なホスト数 |
| ------- | -------------------- | --------------- | ------------ | ------------------- |
| 192.168.1.0/24 | 24ビット | 8ビット | 192.168.1.0 ～ 192.168.1.255 | 256個（ホストは254個） |
| 192.168.0.0/16 | 16ビット | 16ビット | 192.168.0.0 ～ 192.168.255.255 | 65,536個（ホストは65,534個） |

![introduction_to_network_5](/static/images/infrastructure/introduction_to_network_5.png)

#### ② サブネットマスク表記
サブネットマスクは、ネットワーク部を 「1」、ホスト部を 「0」 で表す方法です。

サブネットマスクとは、IPアドレスのネットワーク部を 「1」、ホスト部を 「0」 で表現する32ビットの値です。
これにより、ネットワークの範囲を決め、適切に通信を制御できます。

サブネットマスクは CIDR表記（/24、/16など） と対応しています。

| CIDR表記 | サブネットマスク | IPアドレス範囲 | ホスト数(使用可能なホスト数) |
| ------- | -------------------- | ------------ | ------------------- |
| 192.168.1.0/24 | 255.255.255.0 | 192.168.1.0 ～ 192.168.1.255 | 256個（254個） |
| 192.168.0.0/16 | 255.255.0.0 | 192.168.0.0 ～ 192.168.255.255 | 65,536個（65,534個） |

![introduction_to_network_6](/static/images/infrastructure/introduction_to_network_6.png)

## サブネット

サブネット（Subnet）とは、大きなネットワークを より小さなネットワークに分割 することを指します。例えば、10.0.0.0/16 のネットワークを /24 に分割すれば、256個のサブネット が作れます。

#### サブネット化の目的

1. 物理的な分離  
例: 会社の1階と2階で異なるサブネットを割り当てる
ネットワーク障害が発生しても影響を局所化できる

2. セキュリティの強化  
例: 社内ネットワークとインターネット公開用サーバーを分ける
内部ネットワークのセキュリティを強化できる

![introduction_to_network_7](/static/images/infrastructure/introduction_to_network_7.png)
