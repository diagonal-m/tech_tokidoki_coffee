---
title: 動的型付け言語プログラマーによるGo言語入門
date: '2023-07-01'
tags: ['programming', 'golang']
draft: false
summary: '動的型付け言語しか実務で扱ったことのないエンジニアによるGo言語の入門記事です'
---

## 目次
<TOCInline toc={props.toc} exclude="目次" toHeading={3} />

## 1. はじめに 
　Go言語について基本的な情報と、動的型付け言語と静的型付き言語の違いについて

### 1.1 動的型付け言語と静的型付け言語の違い
- 動的型付け言語
  - 変数の型はプログラムが実行されるときに決定される。   
    e.g.) Python, JavaScript
- 静的型付け言語
  - 変数の型はコンパイル時に決定される。
    - 一度宣言された変数の型は変更することができない  
    e.g.) C言語、Java、Go言語 

### 1.2 Go言語の概要とその特性
　Go言語の設計は、簡潔さと効率性に重きを置いてる。開発者が直感的に理解でき、読みやすく保守しやすいコードを書けるよう、シンプルな構文が採用されている。また、Goはプログラム全体のパフォーマンスに大きな影響を与える「並行性」を基本からサポートしていて、Goの「ゴルーチン」や「チャネル」などの並行処理機能は、大規模で高性能なシステムを効率良く開発するための強力なツールとなる。  

　Goは、ソフトウェア開発の生産性を最大化するために設計されている。それはシンプルな構文と、優れた並行処理機能を持つことで知られている。さらにGoは静的型付け言語であるため、型に関するエラーを早期に検出でき、バグを減らすことが可能である。その他にも、Garbage Collection(ガベージコレクション)、パッケージシステム、テストフレームワークなどがある。  

## 2. Go言語の基本
### 2.1 Goコマンド
　コンパイラ、コードのフォーマッタ、リンター、依存性管理、テストランナーのためのツールが用意されている。

#### 2.1.1 go run
　以下の`hello.go`を用意する。

```go:hello.go
package main

import "fmt"

func main() {
	fmt.Println("Hello, world!")
}
```
　ターミナルでファイルを保存したディレクトリに移動し次のコマンドを実行するとターミナルに「Hello world!」と表示される。
```bash
$ go run hello.go
Hello, world!
```

　go runを実行する際には裏側では以下のような処理が行われている。
1. go runでバイナリファイルがビルドされ一時ディレクトリに置かれる
2. そのファイルを実行する
3. プログラムの実行後、そのファイルが削除される


#### 2.1.2 go build
　再利用できるように実行形式のバイナリファイルを作成したい場合は、go buildを使う

```bash
$ go build hello.go
```
　これによって`hello`という実行形式ファイルが同じディレクトリ内に生成される。これを実行すると先ほどと同じように「Hello, World!」が表示される。

```bash
$ ./hello
Hello, world!
```

#### 2.1.3 go mod
　Go言語では、モジュールとパッケージ管理のために`go mod`コマンドを使用する。Goのモジュールは、特定のディレクトリ内にあるGoパッケージの集合で、一緒にバージョン管理される。  
　まずプロジェクトのディレクトリを作成し移動して、`go mod`コマンドを実行してモジュールを初期化する。

```bash
$ mkdir hello-world
$ cd hello-world
$ go mod init hello-world
```

※ モジュールを公開する場合は「github.com/\<モジュール名\>」のように公開するリポジトリの場所と機能を表す名称を指定する。  
　`go mod init hello-world`を実行すると`go.mod`というファイルが作成される。

```mod:go.mod
module hello-world

go 1.19
```

先ほどのファイル`hello.go`をコピーしてhello-worldディレクトリに入れる。

```bash
$ cp ../hello.go .
```

ファイルを保存したら以下の2つのコマンドを実行する

```bash
$ go mod tidy
$ go build
```

`go.mod`ファイルがあると、ファイルを指定しなくてもそのディレクトリに置かれた`.go`ファイルを解析してコンパイルしてビルドしてくれる。`go.mod`ファイルに`module hello-world`と書かれているので、`hello-world`というコマンドが作成される。  
「`go mod tidy`」は、ソースファイルを解析して必要なサーバパーティのライブラリのダウンロードや不要になったファイルの削除などを行ってくれる。


## 3. 基本型と宣言

